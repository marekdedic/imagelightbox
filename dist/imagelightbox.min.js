!function(i,t,n,e){"use strict";var o=i("<div/>").attr("id","imagelightbox-loading").append(i("<div/>")),a=i("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),r=i("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),l=a.add(r).css("display","block"),c=i("<div/>",{id:"imagelightbox-caption"}),u=i("<a/>",{id:"imagelightbox-close"}),f=i("<div/>",{id:"imagelightbox-overlay"}),d=i("<a/>",{href:"#",class:"imagelightbox-navitem"}),g=i("<div/>",{id:"imagelightbox-nav"}),s=i("<div/>",{id:"imagelightbox-wrapper"}),p=function(){var i=n.body||n.documentElement;return i=i.style,""===i.WebkitTransition?"-webkit-":""===i.MozTransition?"-moz-":""===i.OTransition?"-o-":""===i.transition&&""},h=p()!==!1,b=function(i,t,n){var e={},o=p();e[o+"transform"]="translateX("+t+")",e[o+"transition"]=o+"transform "+n+"s linear",i.css(e)},v="ontouchstart"in t,m=t.navigator.pointerEnabled||t.navigator.msPointerEnabled,x=function(i){if(v)return!0;if(!m||"undefined"==typeof i||"undefined"==typeof i.pointerType)return!1;if("undefined"!=typeof i.MSPOINTER_TYPE_MOUSE){if(i.MSPOINTER_TYPE_MOUSE!==i.pointerType)return!0}else if("mouse"!==i.pointerType)return!0;return!1};i.fn.imageLightbox=function(e){var a=i.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,lockBody:!1,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0},e),r=function(){a.lockBody&&q(!0)},p=function(){D=i([]),s.remove().find("*").remove(),a.lockBody&&q(!1),i(t,n).off(".ilb7")},y=function(){s.append(o),c.html("&nbsp;")},k=function(){i("#imagelightbox-loading").remove(),a.navigation&&I(a.selector),a.caption&&T()},w=function(){s.trigger("previous.ilb2");var i=D.index(X)-1;if(i<0){if(a.quitOnEnd===!0)return Q(),!1;i=D.length-1}X=D.eq(i)},E=function(){s.trigger("next.ilb2");var i=D.index(X)+1;if(i>=D.length){if(a.quitOnEnd===!0)return Q(),!1;i=0}X=D.eq(i)},q=function(t){t?i("body").css("overflow","hidden"):i("body").css("overflow","scroll")},O=function(){s.append(f)},S=function(){u.appendTo(s).on("click.ilb7",function(){return Q(),!1})},T=function(){var t="";i(X).data("ilb2-caption")?t=i(X).data("ilb2-caption"):i(X).find("img").length&&(t=i(X).find("img").attr("alt")),t&&t.length>0&&s.append(c.text(t))},C=function(){var t=D;if(t.length){for(var n=0;n<t.length;n++)g.append(d.clone());s.append(g),g.on("click.ilb7 touchend.ilb7",function(){return!1});var e=g.find("a");e.on("click.ilb7 touchend.ilb7",function(){var n=i(this);if(t.eq(n.index()).attr("href")!==i("#imagelightbox").attr("src")){var o=D.eq(n.index());if(o.length){var a=D.index(X);X=o,j(n.index()<a?"left":"right")}}return e.removeClass("active"),e.eq(n.index()).addClass("active"),!1}).on("touchend.ilb7",function(){return!1})}},I=function(){var i=g.find("a");i.removeClass("active"),i.eq(D.index(X)).addClass("active")},M=function(){s.append(l),l.on("click.ilb7 touchend.ilb7",function(t){return t.preventDefault(),i(this).hasClass("imagelightbox-arrow-left")?z():H(),!1})},P="",D=i([]),X=i(),L=i(),N=0,B=0,K=0,U=!1,_=function(){if(!L.length)return!0;var n=.8*i(t).width(),e=t.innerHeight?t.innerHeight:i(t).height(),o=.9*e,a=new Image;a.src=L.attr("src"),a.onload=function(){if(N=a.width,B=a.height,N>n||B>o){var r=N/B>n/o?N/n:B/o;N/=r,B/=r}L.css({width:N+"px",height:B+"px",top:(e-B)/2+"px",left:(i(t).width()-N)/2+"px"})}},j=function(t){if(U)return!1;if(t="undefined"!=typeof t&&("left"===t?1:-1),L.length){var n={opacity:0};h?b(L,100*t-K+"px",a.animationSpeed/1e3):n.left=parseInt(L.css("left"))+100*t+"px",L.animate(n,a.animationSpeed,function(){R()}),K=0}U=!0,y(),setTimeout(function(){var n=X.attr("href");L=i('<img id="'+a.id+'" />').attr("src",n).on("load.ilb7",function(){var n={opacity:1};if(L.appendTo(s),_(),L.css("opacity",0),h)b(L,-100*t+"px",0),setTimeout(function(){b(L,"0px",a.animationSpeed/1e3)},50);else{var e=parseInt(L.css("left"));n.left=e+"px",L.css("left",e-100*t+"px")}if(L.animate(n,a.animationSpeed,function(){U=!1,k()}),a.preloadNext){var o=D.eq(D.index(X)+1);o.length||(o=D.eq(0)),i("<img />").attr("src",o.attr("href"))}}).on("error.ilb7",function(){k()});var e=0,o=0,r=0;L.on(m?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",function(i){if(i.preventDefault(),a.quitOnImgClick)return Q(),!1;if(x(i.originalEvent))return!0;var t=(i.pageX||i.originalEvent.pageX)-i.target.offsetLeft;N/2>t?z():H()}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(i){return!(x(i.originalEvent)&&!a.quitOnImgClick)||(h&&(r=parseInt(L.css("left"))),void(e=i.originalEvent.pageX||i.originalEvent.touches[0].pageX))}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(i){return!(x(i.originalEvent)&&!a.quitOnImgClick)||(i.preventDefault(),o=i.originalEvent.pageX||i.originalEvent.touches[0].pageX,K=e-o,void(h?b(L,-K+"px",0):L.css("left",r-K+"px")))}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(i){return!(x(i.originalEvent)&&!a.quitOnImgClick)||void(Math.abs(K)>50?K<0?z():H():h?b(L,"0px",a.animationSpeed/1e3):L.animate({left:r+"px"},a.animationSpeed/2))})},a.animationSpeed+100)},z=function(){w()!==!1&&j("left")},H=function(){E()!==!1&&j("right")},R=function(){return!!L.length&&(L.remove(),void(L=i()))},Y=function(t){function n(){a.arrows&&M(),a.overlay&&O(),a.button&&S(),a.navigation&&C()}return!U&&(U=!1,r(),n(),i("body").append(s),s.trigger("start.ilb2"),X=t,void j())},Q=function(){return s.trigger("quit.ilb2"),!!L.length&&void L.animate({opacity:0},a.animationSpeed,function(){R(),U=!1,p()})},W=function(t){function n(){t.filter(function(){return i(this).data("imagelightbox")===P}).each(function(){D=D.add(i(this))})}t.on("click.ilb7",{set:P},function(t){t.preventDefault(),P=i(t.currentTarget).data("imagelightbox"),n(),Y(i(this))})};return i(t).on("resize.ilb7",_),i(n).ready(function(){a.quitOnDocClick&&i(n).on(v?"touchend.ilb7":"click.ilb7",function(t){L.length&&!i(t.target).is(L)&&(t.preventDefault(),Q())}),a.lockBody&&i(n).on("keydown.ilb7",function(i){return!L.length||([32,38,40].indexOf(i.which)>-1?(i.preventDefault(),!1):void 0)}),a.enableKeyboard&&i(n).on("keyup.ilb7",function(i){return!L.length||(i.preventDefault(),27===i.keyCode&&a.quitOnEscKey===!0&&Q(),void(37===i.keyCode?z():39===i.keyCode&&H()))})}),i(n).off("click",this.selector),W(i(this)),this.addToImageLightbox=function(i){W(i)},this.loadPreviousImage=function(){z()},this.loadNextImage=function(){H()},this.quitImageLightbox=function(){return Q(),this},this.startImageLightbox=function(){this.length>0&&Y(i(this[0]))},this}}(jQuery,window,document);