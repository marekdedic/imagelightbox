!function(t,i,n,e){"use strict";var o=t("<div/>").attr("id","imagelightbox-loading").append(t("<div/>")),a=t("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),r=t("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),l=a.add(r),c=t("<div/>",{id:"imagelightbox-caption"}),u=t("<a/>",{id:"imagelightbox-close"}),f=t("<div/>",{id:"imagelightbox-overlay"}),d=t("<a/>",{href:"#",class:"imagelightbox-navitem"}),s=t("<div/>",{id:"imagelightbox-nav"}),g=t("<div/>",{id:"imagelightbox-wrapper"}),h=function(){var t=n.body||n.documentElement;return t=t.style,""===t.WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition&&""},p=h()!==!1,v=function(t,i,n){var e={},o=h();e[o+"transform"]="translateX("+i+")",e[o+"transition"]=o+"transform "+n+"s linear",t.css(e)},b="ontouchstart"in i,m=i.navigator.pointerEnabled||i.navigator.msPointerEnabled,x=function(t){if(b)return!0;if(!m||"undefined"==typeof t||"undefined"==typeof t.pointerType)return!1;if("undefined"!=typeof t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1},y=[];t.fn.imageLightbox=function(e){y.push(this.data("imagelightbox"));var a=t.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,lockBody:!1,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0},e),r=function(){a.onStart&&a.onStart(),a.arrows&&X(this),a.navigation&&D(this,a.selector),a.overlay&&I(),a.button&&C(),a.lockBody&&T(!0)},h=function(){j=t([]),g.remove().find("*").remove(),a.lockBody&&T(!1),a.onEnd&&a.onEnd()},w=function(){a.onLoadStart&&a.onLoadStart(),a.activity&&O(),a.caption&&P()},E=function(){a.activity&&S(),a.arrows&&l.css("display","block"),a.navigation&&L(a.selector),a.caption&&M(),a.onLoadEnd&&a.onLoadEnd()},k=function(){g.trigger("previous.ilb2");var t=j.index(B)-1;if(t<0){if(a.quitOnEnd===!0)return G(),!1;t=j.length-1}B=j.eq(t)},q=function(){g.trigger("next.ilb2");var t=j.index(B)+1;if(t>=j.length){if(a.quitOnEnd===!0)return G(),!1;t=0}B=j.eq(t)},O=function(){g.append(o)},S=function(){t("#imagelightbox-loading").remove()},T=function(i){i?t("body").css("overflow","hidden"):t("body").css("overflow","scroll")},I=function(){g.append(f)},C=function(){u.appendTo(g).on("click.ilb7",function(){return G(),!1})},M=function(){var i="";t(B).data("ilb2-caption")?i=t(B).data("ilb2-caption"):t(B).find("img").length&&(i=t(B).find("img").attr("alt")),i&&i.length>0&&g.append(c.text(i))},P=function(){c.html("&nbsp;")},D=function(){var i=j;if(i.length){for(var n=0;n<i.length;n++)s.append(d.clone());g.append(s),s.on("click.ilb7 touchend.ilb7",function(){return!1});var e=s.find("a");e.on("click.ilb7 touchend.ilb7",function(){var n=t(this);if(i.eq(n.index()).attr("href")!==t("#imagelightbox").attr("src")){var o=j.eq(n.index());if(o.length){var a=j.index(B);B=o,Q(n.index()<a?"left":"right")}}return e.removeClass("active"),e.eq(n.index()).addClass("active"),!1}).on("touchend.ilb7",function(){return!1})}},L=function(){var t=s.find("a");t.removeClass("active"),t.eq(j.index(B)).addClass("active")},X=function(){g.append(l),l.on("click.ilb7 touchend.ilb7",function(i){return i.preventDefault(),t(this).hasClass("imagelightbox-arrow-left")?W():$(),!1})},N="",j=t([]),B=t(),K=t(),U=0,_=0,z=0,R=!1,H=function(t){function i(t){var i,e,o,a=n.createElement("a"),r={};for(a.href=t,i=a.search.replace(/^\?/,"").split("&"),o=0;o<i.length;o++)e=i[o].split("="),r[e[0]]=e[1];return{protocol:a.protocol,host:a.host,hostname:a.hostname,port:a.port,pathname:a.pathname,search:a.search,searchObject:r,hash:a.hash}}var e=a.allowedTypes,o=/^(?!\|)[\w\|]+(?!\|)$/.test(e);if(!o)return!1;var r=t.attr("href"),l=i(r).pathname,c=new RegExp(e,"i"),u=c.test(l);return u},Y=function(){if(!K.length)return!0;var n=.8*t(i).width(),e=i.innerHeight?i.innerHeight:t(i).height(),o=.9*e,a=new Image;a.src=K.attr("src"),a.onload=function(){if(U=a.width,_=a.height,U>n||_>o){var r=U/_>n/o?U/n:_/o;U/=r,_/=r}K.css({width:U+"px",height:_+"px",top:(e-_)/2+"px",left:(t(i).width()-U)/2+"px"})}},Q=function(i){if(R)return!1;if(i="undefined"!=typeof i&&("left"===i?1:-1),K.length){var n={opacity:0};p?v(K,100*i-z+"px",a.animationSpeed/1e3):n.left=parseInt(K.css("left"))+100*i+"px",K.animate(n,a.animationSpeed,function(){A()}),z=0}R=!0,w(),setTimeout(function(){var n=B.attr("href");K=t('<img id="'+a.id+'" />').attr("src",n).on("load.ilb7",function(){var n={opacity:1};if(K.appendTo(g),Y(),K.css("opacity",0),p)v(K,-100*i+"px",0),setTimeout(function(){v(K,"0px",a.animationSpeed/1e3)},50);else{var e=parseInt(K.css("left"));n.left=e+"px",K.css("left",e-100*i+"px")}if(K.animate(n,a.animationSpeed,function(){R=!1,E()}),a.preloadNext){var o=j.eq(j.index(B)+1);o.length||(o=j.eq(0)),t("<img />").attr("src",o.attr("href"))}}).on("error.ilb7",function(){E()});var e=0,o=0,r=0;K.on(m?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",function(t){if(t.preventDefault(),a.quitOnImgClick)return G(),!1;if(x(t.originalEvent))return!0;var i=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;U/2>i?W():$()}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(t){return!(x(t.originalEvent)&&!a.quitOnImgClick)||(p&&(r=parseInt(K.css("left"))),void(e=t.originalEvent.pageX||t.originalEvent.touches[0].pageX))}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(t){return!(x(t.originalEvent)&&!a.quitOnImgClick)||(t.preventDefault(),o=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,z=e-o,void(p?v(K,-z+"px",0):K.css("left",r-z+"px")))}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(t){return!(x(t.originalEvent)&&!a.quitOnImgClick)||void(Math.abs(z)>50?z<0?W():$():p?v(K,"0px",a.animationSpeed/1e3):K.animate({left:r+"px"},a.animationSpeed/2))})},a.animationSpeed+100)},W=function(){k()!==!1&&Q("left")},$=function(){q()!==!1&&Q("right")},A=function(){return!!K.length&&(K.remove(),void(K=t()))},F=function(i){return!R&&(R=!1,r(),t("body").append(g),g.trigger("start.ilb7",[y]),B=i,void Q())},G=function(){return g.trigger("quit.ilb2"),!!K.length&&void K.animate({opacity:0},a.animationSpeed,function(){A(),R=!1,h()})},J=function(i){function n(){i.filter(function(){return t(this).data("imagelightbox")===N}).filter(function(){return H(t(this))}).each(function(){j=j.add(t(this))})}i.on("click.ilb7",{set:N},function(i){i.preventDefault(),N=t(i.currentTarget).data("imagelightbox"),n(),F(t(this))})};return t(i).on("resize.ilb7",Y),t(n).ready(function(){t(this).on("start.ilb7",function(t,i){console.log(i)}),a.quitOnDocClick&&t(n).on(b?"touchend.ilb7":"click.ilb7",function(i){K.length&&!t(i.target).is(K)&&(i.preventDefault(),G())}),a.lockBody&&t(n).on("keydown.ilb7",function(t){return!K.length||([9,32,38,40].indexOf(t.which)>-1?(t.preventDefault(),!1):void 0)}),a.enableKeyboard&&t(n).on("keyup.ilb7",function(t){return!K.length||(t.preventDefault(),[27].indexOf(t.which)>-1&&a.quitOnEscKey&&G(),void([37].indexOf(t.which)>-1?W():[39].indexOf(t.which)>-1&&$()))})}),t(n).off("click",this.selector),J(t(this)),this.addToImageLightbox=function(t){J(t)},this.loadPreviousImage=function(){W()},this.loadNextImage=function(){$()},this.quitImageLightbox=function(){return G(),this},this.startImageLightbox=function(){t(this).trigger("click.ilb7")},this}}(jQuery,window,document);