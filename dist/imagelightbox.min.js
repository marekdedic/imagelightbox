!function(t,i,n,e){"use strict";var o=t("<div/>").attr("id","imagelightbox-loading").append(t("<div/>")),a=t("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),r=t("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),l=a.add(r),c=t("<div/>",{id:"imagelightbox-caption"}),u=t("<a/>",{id:"imagelightbox-close"}),d=t("<div/>",{id:"imagelightbox-overlay"}),f=t("<a/>",{href:"#",class:"imagelightbox-navitem"}),g=t("<div/>",{id:"imagelightbox-nav"}),s=t("<div/>",{id:"imagelightbox-wrapper"}),p=function(){var t=n.body||n.documentElement;return t=t.style,""===t.WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition&&""},h=p()!==!1,v=function(t,i,n){var e={},o=p();e[o+"transform"]="translateX("+i+")",e[o+"transition"]=o+"transform "+n+"s linear",t.css(e)},b="ontouchstart"in i,m=i.navigator.pointerEnabled||i.navigator.msPointerEnabled,x=function(t){if(b)return!0;if(!m||"undefined"==typeof t||"undefined"==typeof t.pointerType)return!1;if("undefined"!=typeof t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1};t.fn.imageLightbox=function(a){var r=t.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg||gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,imageWidth:e,lockBody:!1,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0,onStart:function(){r.arrows&&I(this),r.navigation&&q(this,r.selector),r.overlay&&w(),r.button&&k(),r.lockBody&&E(!0)},onEnd:function(){C=t([]),s.remove().find("*").remove(),r.lockBody&&E(!1)},onLoadStart:function(){r.activity&&p(),r.caption&&S()},onLoadEnd:function(){r.activity&&y(),r.arrows&&l.css("display","block"),r.navigation&&O(r.selector),r.caption&&T()},previousTarget:function(){return this.previousTargetDefault()},previousTargetDefault:function(){s.trigger("previous.ilb2");var t=C.index(L)-1;if(t<0){if(r.quitOnEnd)return H(),!1;t=C.length-1}L=C.eq(t)},nextTarget:function(){return this.nextTargetDefault()},nextTargetDefault:function(){s.trigger("next.ilb2");var t=C.index(L)+1;if(t>=C.length){if(r.quitOnEnd)return H(),!1;t=0}L=C.eq(t)}},a),p=function(){s.append(o)},y=function(){t("#imagelightbox-loading").remove()},E=function(i){i?t("body").css("overflow","hidden"):t("body").css("overflow","scroll")},w=function(){s.append(d)},k=function(){u.appendTo(s).on("click.ilb7",function(){return H(),!1})},T=function(){var i="";t(L).data("ilb2-caption")?i=t(L).data("ilb2-caption"):t(L).find("img").length&&(i=t(L).find("img").attr("alt")),i&&i.length>0&&s.append(c.text(i))},S=function(){c.html("&nbsp;")},q=function(){var i=C;if(i.length){for(var n=0;n<i.length;n++)g.append(f.clone());s.append(g),g.on("click.ilb7 touchend.ilb7",function(){return!1});var e=g.find("a");e.on("click.ilb7 touchend.ilb7",function(){var n=t(this);if(i.eq(n.index()).attr("href")!==t("#imagelightbox").attr("src")){var o=C.eq(n.index());if(o.length){var a=C.index(L);L=o,K(n.index()<a?"left":"right")}}return e.removeClass("active"),e.eq(n.index()).addClass("active"),!1}).on("touchend.ilb7",function(){return!1})}},O=function(){var t=g.find("a");t.removeClass("active"),t.eq(C.index(L)).addClass("active")},I=function(){s.append(l),l.on("click.ilb7 touchend.ilb7",function(i){return i.preventDefault(),t(this).hasClass("imagelightbox-arrow-left")?U():_(),!1})},D="",C=t([]),L=t(),M=t(),P=0,W=0,N=0,X=!1,B=function(){if(!M.length)return!0;var n=.8*t(i).width(),e=i.innerHeight?i.innerHeight:t(i).height(),o=.9*e,a=new Image;a.src=M.attr("src"),a.onload=function(){P=a.width,W=a.height;var l=P/W;t.isNumeric(r.imageWidth)!==!0&&(P>n||W>o)?(l=l>n/o?P/n:W/o,P/=l,W/=l):t.isNumeric(r.imageWidth)&&(r.imageWidth=r.imageWidth>100?100:r.imageWidth,P=n*r.imageWidth/100,W=P/l),M.css({width:P+"px",height:W+"px",top:(e-W)/2+"px",left:(t(i).width()-P)/2+"px"})}},K=function(i){if(X)return!1;if(i="undefined"!=typeof i&&("left"===i?1:-1),M.length){var n={opacity:0};h?v(M,100*i-N+"px",r.animationSpeed/1e3):n.left=parseInt(M.css("left"))+100*i+"px",M.animate(n,r.animationSpeed,function(){j()}),N=0}X=!0,r.onLoadStart!==!1&&r.onLoadStart(),setTimeout(function(){var n=L.attr("href");M=t('<img id="'+r.id+'" />').attr("src",n).on("load.ilb7",function(){var n={opacity:1};if(M.appendTo(s),B(),M.css("opacity",0),h)v(M,-100*i+"px",0),setTimeout(function(){v(M,"0px",r.animationSpeed/1e3)},50);else{var e=parseInt(M.css("left"));n.left=e+"px",M.css("left",e-100*i+"px")}if(M.animate(n,r.animationSpeed,function(){X=!1,r.onLoadEnd!==!1&&r.onLoadEnd()}),r.preloadNext){var o=C.eq(C.index(L)+1);o.length||(o=C.eq(0)),t("<img />").attr("src",o.attr("href"))}}).on("error.ilb7",function(){r.onLoadEnd!==!1&&r.onLoadEnd()});var e=0,o=0,a=0;M.on(m?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",function(t){if(t.preventDefault(),r.quitOnImgClick)return H(),!1;if(x(t.originalEvent))return!0;var i=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;P/2>i?U():_()}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(t){return!(x(t.originalEvent)&&!r.quitOnImgClick)||(h&&(a=parseInt(M.css("left"))),void(e=t.originalEvent.pageX||t.originalEvent.touches[0].pageX))}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(t){return!(x(t.originalEvent)&&!r.quitOnImgClick)||(t.preventDefault(),o=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,N=e-o,void(h?v(M,-N+"px",0):M.css("left",a-N+"px")))}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(t){return!(x(t.originalEvent)&&!r.quitOnImgClick)||void(Math.abs(N)>50?N<0?U():_():h?v(M,"0px",r.animationSpeed/1e3):M.animate({left:a+"px"},r.animationSpeed/2))})},r.animationSpeed+100)},U=function(){r.previousTarget()!==!1&&K("left")},_=function(){r.nextTarget()!==!1&&K("right")},j=function(){return!!M.length&&(M.remove(),void(M=t()))},z=function(i){return!X&&(X=!1,r.onStart!==!1&&r.onStart(),t("body").append(s),s.trigger("start.ilb2"),L=i,void K())},H=function(){return s.trigger("quit.ilb2"),!!M.length&&void M.animate({opacity:0},r.animationSpeed,function(){j(),X=!1,r.onEnd!==!1&&r.onEnd()})},R=function(i){function n(){i.filter(function(){return t(this).data("imagelightbox")===D}).each(function(){C=C.add(t(this))})}i.on("click.ilb7",{set:D},function(i){i.preventDefault(),D=t(i.currentTarget).data("imagelightbox"),n(),z(t(this))})};return t(i).on("resize.ilb7",B),t(n).ready(function(){r.quitOnDocClick&&t(n).on(b?"touchend.ilb7":"click.ilb7",function(i){M.length&&!t(i.target).is(M)&&(i.preventDefault(),H())}),r.lockBody&&t(n).on("keydown.ilb7",function(t){return!M.length||([9,32,38,40].indexOf(t.which)>-1?(t.preventDefault(),!1):void 0)}),r.enableKeyboard&&t(n).on("keyup.ilb7",function(t){return!M.length||(t.preventDefault(),[27].indexOf(t.which)>-1&&r.quitOnEscKey&&H(),void([37].indexOf(t.which)>-1?U():[39].indexOf(t.which)>-1&&_()))})}),t(n).off("click",this.selector),R(t(this)),this.addToImageLightbox=function(t){R(t)},this.loadPreviousImage=function(){U()},this.loadNextImage=function(){_()},this.quitImageLightbox=function(){return H(),this},this.startImageLightbox=function(){t(this).trigger("click.ilb7")},this}}(jQuery,window,document);