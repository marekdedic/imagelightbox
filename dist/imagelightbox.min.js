!function(t,n,e,i){"use strict";var o=function(){var t=e.body||e.documentElement;return t=t.style,""===t.WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition?"":!1},r=o()!==!1,a=function(t,n,e){var i={},r=o();i[r+"transform"]="translateX("+n+")",i[r+"transition"]=r+"transform "+e+"s linear",t.css(i)},u="ontouchstart"in n,c=n.navigator.pointerEnabled||n.navigator.msPointerEnabled,f=function(t){if(u)return!0;if(!c||"undefined"==typeof t||"undefined"==typeof t.pointerType)return!1;if("undefined"!=typeof t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1};t.fn.imageLightbox=function(o){function s(n){g.length&&!t(n.target).is(g)&&(n.preventDefault(),q())}var d=t.extend({selector:'id="imagelightbox"',allowedTypes:"png|jpg|jpeg||gif",animationSpeed:250,preloadNext:!0,enableKeyboard:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0,onStart:!1,onEnd:!1,onLoadStart:!1,onLoadEnd:!1,previousTarget:function(){return this.previousTargetDefault()},previousTargetDefault:function(){var t=l.index(p)-1;if(0>t){if(d.quitOnEnd===!0)return q(),!1;t=l.length-1}p=l.eq(t)},nextTarget:function(){return this.nextTargetDefault()},nextTargetDefault:function(){var t=l.index(p)+1;if(t>=l.length){if(d.quitOnEnd===!0)return q(),!1;t=0}p=l.eq(t)}},o),l=t([]),p=t(),g=t(),h=0,v=0,m=0,x=!1,E=function(n){var e="a"===t(n).prop("tagName").toLowerCase()&&new RegExp(".("+d.allowedTypes+")$","i").test(t(n).attr("href")),o=t(n).attr("data-lightbox")!==i;return e||o},y=function(){if(!g.length)return!0;var e=.8*t(n).width(),i=.9*t(n).height(),o=new Image;o.src=g.attr("src"),o.onload=function(){if(h=o.width,v=o.height,h>e||v>i){var r=h/v>e/i?h/e:v/i;h/=r,v/=r}g.css({width:h+"px",height:v+"px",top:(t(n).height()-v)/2+"px",left:(t(n).width()-h)/2+"px"})}},S=function(n){if(x)return!1;if(n="undefined"==typeof n?!1:"left"===n?1:-1,g.length){var e={opacity:0};r?a(g,100*n-m+"px",d.animationSpeed/1e3):e.left=parseInt(g.css("left"))+100*n+"px",g.animate(e,d.animationSpeed,function(){k()}),m=0}x=!0,d.onLoadStart!==!1&&d.onLoadStart(),setTimeout(function(){var e=p.attr("href");e===i&&(e=p.attr("data-lightbox")),g=t("<img "+d.selector+" />").attr("src",e).load(function(){g.appendTo("body"),y();var e={opacity:1};if(g.css("opacity",0),r)a(g,-100*n+"px",0),setTimeout(function(){a(g,"0px",d.animationSpeed/1e3)},50);else{var i=parseInt(g.css("left"));e.left=i+"px",g.css("left",i-100*n+"px")}if(g.animate(e,d.animationSpeed,function(){x=!1,d.onLoadEnd!==!1&&d.onLoadEnd()}),d.preloadNext){var o=l.eq(l.index(p)+1);o.length||(o=l.eq(0)),t("<img />").attr("src",o.attr("href")).load()}}).error(function(){d.onLoadEnd!==!1&&d.onLoadEnd()});var o=0,u=0,s=0;g.on(c?"pointerup MSPointerUp":"click",function(t){if(t.preventDefault(),d.quitOnImgClick)return q(),!1;if(f(t.originalEvent))return!0;var n=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;h/2>n?T():b()}).on("touchstart pointerdown MSPointerDown",function(t){return!f(t.originalEvent)||d.quitOnImgClick?!0:(r&&(s=parseInt(g.css("left"))),void(o=t.originalEvent.pageX||t.originalEvent.touches[0].pageX))}).on("touchmove pointermove MSPointerMove",function(t){return!f(t.originalEvent)||d.quitOnImgClick?!0:(t.preventDefault(),u=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,m=o-u,void(r?a(g,-m+"px",0):g.css("left",s-m+"px")))}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(t){return!f(t.originalEvent)||d.quitOnImgClick?!0:void(Math.abs(m)>50?0>m?T():b():r?a(g,"0px",d.animationSpeed/1e3):g.animate({left:s+"px"},d.animationSpeed/2))})},d.animationSpeed+100)},T=function(){d.previousTarget()!==!1&&S("left")},b=function(){d.nextTarget()!==!1&&S("right")},k=function(){return g.length?(g.remove(),void(g=t())):!1},q=function(){return g.length?void g.animate({opacity:0},d.animationSpeed,function(){k(),x=!1,d.quitOnDocClick&&t(e).off(u?"touchend":"click",s),d.onEnd!==!1&&d.onEnd()}):!1};return t(n).on("resize",y),d.quitOnDocClick&&t(e).on(u?"touchend":"click",s),d.enableKeyboard&&t(e).on("keyup",function(t){return g.length?(t.preventDefault(),27===t.keyCode&&d.quitOnEscKey===!0&&q(),void(37===t.keyCode?T():39===t.keyCode&&b())):!0}),this.startImageLightbox=function(n){return E(this)?(n!==i&&n.preventDefault(),x?!1:(x=!1,d.onStart!==!1&&d.onStart(),p=t(this),void S())):!0},t(e).off("click",this.selector),t(e).on("click",this.selector,this.startImageLightbox),this.each(function(){return E(this)?void(l=l.add(t(this))):!0}),this.switchImageLightbox=function(t){var n=l.eq(t);if(n.length){var e=l.index(p);p=n,S(e>t?"left":"right")}return this},this.loadPreviousImage=function(){T()},this.loadNextImage=function(){b()},this.quitImageLightbox=function(){return q(),this},this.addImageLightbox=function(n){return n.each(function(){return E(this)?void(l=l.add(t(this))):!0}),n.click(this.startImageLightbox),this},this}}(jQuery,window,document);