"use strict";!function(M,D,R){var z=M("<div/>").attr("class","imagelightbox-loading").append(M("<div/>")),t=M("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),e=M("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),X=t.add(e),j=M("<div/>",{class:"imagelightbox-caption",html:"&nbsp;"}),N=M("<button/>",{type:"button",class:"imagelightbox-close"}),V=M("<div/>",{class:"imagelightbox-overlay"}),U=M("<a/>",{href:"#",class:"imagelightbox-navitem"}),K=M("<div/>",{class:"imagelightbox-nav"}),Y=M("<div/>",{class:"imagelightbox-wrapper"}),_=M("body"),o=function(){var t=(R.body||R.documentElement).style;return""===t.transition?"":""===t.webkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition&&"-o-"},H=!1!==o(),$=function(t,e,i){var n={},a=o();n[a+"transform"]="translateX("+e+") translateY(-50%)",n[a+"transition"]=a+"transform "+i+"s ease-in",t.css(n)},W="ontouchstart"in D,i=D.navigator,B=i.pointerEnabled||i.msPointerEnabled,Q=function(t){if(W)return!0;if(!B||void 0===t||void 0===t.pointerType)return!1;if(void 0!==t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1},A=!!(R.fullscreenEnabled||R.webkitFullscreenEnabled||R.mozFullScreenEnabled||R.msFullscreenEnabled),G=!(!D.history||!history.pushState);M.fn.imageLightbox=function(t){var i=0,s=M(),u=!1,d=0,g=M(),r=-1,h=M([]),n="",p=[],f=M.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,history:!1,fullscreen:!1,gutter:10,offsetY:0,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0},t),b=function(){f.activity&&y(),f.arrows&&X.css("display","block")},a=function(t,e,i){var n=e+"="+i,a="?"+n;if(t){var o=new RegExp("([?&])"+e+"=[^&]*");a=null!==o.exec(t)?t.replace(o,"$1"+n):t+"&"+n}return a},o=function(){if(G&&f.history){var t=h[r].dataset.ilb2Id;t||(t=r.toString());var e={imageLightboxIndex:t,imageLightboxSet:""},i=h[r].dataset.imagelightbox;i&&(e.imageLightboxSet=i);var n=a(R.location.search,"imageLightboxIndex",t);i&&(n=a(n,"imageLightboxSet",i)),D.history.pushState(e,"",R.location.pathname+n)}},e=function(t,e){var i=t;if(i){var n=new RegExp("\\?"+e+"=[^&]*"),a=new RegExp("&"+e+"=[^&]*");i=(i=i.replace(n,"?")).replace(a,"")}return i},l=function(t){var e=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(R.location.search);if(e&&e[2])return decodeURIComponent(e[2].replace(/\+/g," "))},c=function(){if(G&&f.history){var t=l("imageLightboxIndex");if(t){var e=h.filter('[data-ilb2-id="'+t+'"]');0<e.length?r=h.index(e):(r=parseInt(t),e=M(h[r]));var i=l("imageLightboxSet");!e[0]||i&&i!==e[0].dataset.imagelightbox||T(e,!0)}}},m=function(){if(--r<0){if(!0===f.quitOnEnd)return void O();r=h.length-1}g=h.eq(r),o(),Y.trigger("previous.ilb2",g),C(1)},v=function(){if(++r>=h.length){if(!0===f.quitOnEnd)return void O();r=0}o(),g=h.eq(r),Y.trigger("next.ilb2",g),C(-1)},x=function(){Y.append(z)},y=function(){M(".imagelightbox-loading").remove()},w=function(){Y.append(V)},E=function(){N.appendTo(Y).on("click.ilb7",function(){return O(),!1})},S=function(){j.css("opacity","0"),j.html("&nbsp;"),M(g).data("ilb2-caption")?(j.css("opacity","1"),j.html(M(g).data("ilb2-caption"))):M(g).find("img").attr("alt")&&(j.css("opacity","1"),j.html(M(g).find("img").attr("alt")))},I=function(){if(h.length){for(var t=0;t<h.length;t++)K.append(U.clone());var e=K.children("a");e.eq(h.index(g)).addClass("active"),Y.on("previous.ilb2 next.ilb2",function(){e.removeClass("active").eq(h.index(g)).addClass("active")}),Y.append(K),K.on("click.ilb7 touchend.ilb7",function(){return!1}).on("click.ilb7 touchend.ilb7","a",function(){var t=M(this);if(h.eq(t.index()).attr("href")!==M(".imagelightbox").attr("src")){var e=h.eq(t.index());e.length&&(i=h.index(g),g=e,C(t.index()<i?-1:1))}t.addClass("active").siblings().removeClass("active")})}},k=function(){Y.append(X),X.on("click.ilb7 touchend.ilb7",function(t){t.stopImmediatePropagation(),t.preventDefault(),M(this).hasClass("imagelightbox-arrow-left")?m():v()})},q=function(){if(s.length){var t=f.caption?j.outerHeight():0,r=M(D).width(),l=M(D).height()-t,c=Math.abs(1-f.gutter/100),i=s.data("ilb2VideoId"),n=!1;if(M.each(p,function(t,e){i===this.i&&(o(e.w,e.h),n=!0)}),!n){var e=s.get(0);if(void 0===e.videoWidth){var a=new Image;a.src=s.attr("src"),a.onload=function(){o(a.width,a.height)}}else o(e.videoWidth,e.videoHeight)}}function o(t,e){if(r<t||l<e){var i=r/l<t/e?t/r:e/l;t/=i,e/=i}var n=e*c,a=t*c,o=(M(D).width()-a)/2;s.css({width:a+"px",height:n+"px",left:o+"px"})}},C=function(c){if(!u){if(s.length){var t={opacity:0};H?$(s,100*c-d+"px",f.animationSpeed/1e3):t.left=parseInt(s.css("left"))+100*c+"px",s.animate(t,f.animationSpeed,function(){L()}),d=0}u=!0,f.activity&&x(),f.caption&&S(),setTimeout(function(){var i,e=0,n=0,a=0,t=g.attr("href"),o=g.data("ilb2Video"),r=M();function l(){var t={opacity:1};if(s.appendTo(Y),q(),s.css("opacity",0),H?($(s,-100*c+"px",0),setTimeout(function(){$(s,"0px",f.animationSpeed/1e3)},50)):(a=parseInt(s.css("left")),t.left=a+"px",s.css("left",a-100*c+"px")),s.animate(t,f.animationSpeed,function(){u=!1,b()}),f.preloadNext){var e=h.eq(h.index(g)+1);e.length||(e=h.eq(0)),M("<img />").attr("src",e.attr("href"))}Y.trigger("loaded.ilb2")}o?M.each(p,function(t,e){e.i===g.data("ilb2VideoId")&&(i=e.l,r=e.e,e.a&&(!1===i&&r.attr("autoplay",e.a),!0===i&&r.get(0).play()))}):r=M("<img id='"+f.id+"' />").attr("src",t),s=r.on("load.ilb7",l).on("error.ilb7",function(){b()}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(t){Q(t.originalEvent)&&!f.quitOnImgClick&&(H&&(a=parseInt(s.css("left"))),e=t.originalEvent.pageX||t.originalEvent.touches[0].pageX)}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(t){!B&&"pointermove"===t.type||!Q(t.originalEvent)||f.quitOnImgClick||(t.preventDefault(),n=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,d=e-n,H?$(s,-d+"px",0):s.css("left",a-d+"px"))}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(t){Q(t.originalEvent)&&!f.quitOnImgClick&&(50<Math.abs(d)?d<0?m():v():H?$(s,"0px",f.animationSpeed/1e3):s.animate({left:a+"px"},f.animationSpeed/2))}),!0===i&&l(),!1===i&&(s=s.on("loadedmetadata.ilb7",l)),o||(s=s.on(B?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",function(t){if(t.preventDefault(),f.quitOnImgClick)O();else if(!Q(t.originalEvent)){var e=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;t.target.width/3>e?m():v()}}))},f.animationSpeed+100)}},L=function(){s.length&&(s.remove(),s=M())},T=function(t,e){u||(u=!1,g=t,r=h.index(g),e||o(),f.arrows&&k(),f.navigation&&I(),f.overlay&&w(),f.button&&E(),f.caption&&Y.append(j),_.append(Y).addClass("imagelightbox-open"),Y.trigger("start.ilb2",t),C(0))},O=function(t){void 0===t&&(t=!1),r=-1,t||function(){if(G&&f.history){var t=e(R.location.search,"imageLightboxIndex");t=e(t,"imageLightboxSet"),D.history.pushState({},"",R.location.pathname+t)}}(),Y.trigger("quit.ilb2"),_.removeClass("imagelightbox-open"),s.length&&s.animate({opacity:0},f.animationSpeed,function(){L(),u=!1,Y.remove().find("*").remove()})},P=function(e){e.each(function(){h=e.add(M(this))}),e.on("click.ilb7",{set:n},function(t){t.preventDefault(),n=M(t.currentTarget).data("imagelightbox"),e.filter(function(){return M(this).data("imagelightbox")===n}).filter(function(){return function(t){return"a"===M(t).prop("tagName").toLowerCase()&&(new RegExp(".("+f.allowedTypes+")$","i").test(M(t).attr("href"))||M(t).data("ilb2Video"))}(M(this))}).each(function(){h=h.add(M(this))}),h.length<1?O():T(M(this),!1)})},F=function(t){t.each(function(){var t=M(this).data("ilb2Video");if(t){var e=M(this).data("ilb2Id");e||(e="a"+(65536*(1+Math.random())|0).toString(16)),M(this).data("ilb2VideoId",e);var n={e:M("<video id='"+f.id+"' preload='metadata' data-ilb2-video-id='"+e+"'>"),i:e,l:!1,a:void 0,h:void 0,w:void 0};M.each(t,function(t,e){switch(t){case"autoplay":n.a=e;break;case"height":n.h=e;break;case"sources":break;case"width":n.w=e;break;default:n.e=n.e.attr(t,e)}}),t.sources&&M.each(t.sources,function(t,e){var i=M("<source>");M.each(e,function(t,e){i=i.attr(t,e)}),n.e.append(i)}),n.e.on("loadedmetadata.ilb7",function(){n.l=!0}),p.push(n)}})};return M(D).on("resize.ilb7",q),G&&f.history&&M(D).on("popstate",function(t){var e=t.originalEvent.state;if(e){var i=e.imageLightboxIndex;if(void 0!==i){var n=h.filter('[data-ilb2-id="'+i+'"]'),a=i;if(0<n.length?a=h.index(n):n=M(h[a]),n[0]&&(!e.imageLightboxSet||e.imageLightboxSet===n[0].dataset.imagelightbox))if(r<0)T(n,!0);else{var o=1;r<a&&(o=-1),g=n,r=a,C(o)}}else O(!0)}else O(!0)}),M(R).ready(function(){f.quitOnDocClick&&M(R).on(W?"touchend.ilb7":"click.ilb7",function(t){s.length&&!M(t.target).is(s)&&(t.preventDefault(),O())}),f.fullscreen&&A&&M(R).on("keydown.ilb7",function(t){s.length&&([9,32,38,40].includes(t.which)&&(t.stopPropagation(),t.preventDefault()),[13].includes(t.which)&&(t.stopPropagation(),t.preventDefault(),function(){var t=D.document,e=R.getElementById(f.id).parentElement,i=e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen,n=t.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||t.msExitFullscreen;t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement?n.call(t):i.call(e)}()))}),f.enableKeyboard&&M(R).on("keydown.ilb7",function(t){s.length&&([27].includes(t.which)&&f.quitOnEscKey&&(t.stopPropagation(),t.preventDefault(),O()),[37].includes(t.which)&&(t.stopPropagation(),t.preventDefault(),m()),[39].includes(t.which)&&(t.stopPropagation(),t.preventDefault(),v()))})}),M(R).off(".ilb7 .ilb2",f.selector),P(M(this)),c(),F(h),this.addToImageLightbox=function(t){P(t),F(t)},this.openHistory=function(){c()},this.loadPreviousImage=function(){m()},this.loadNextImage=function(){v()},this.quitImageLightbox=function(){return O(),this},this.startImageLightbox=function(t){t?t.trigger("click.ilb7"):M(this).trigger("click.ilb7")},this}}("object"==typeof module&&"object"==typeof module.exports?require("jquery"):jQuery,window,document);