!function(t,e,i){"use strict";var n=t("<div/>").attr("class","imagelightbox-loading").append(t("<div/>")),o=t("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),a=t("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),r=o.add(a),l=t("<div/>",{class:"imagelightbox-caption",html:"&nbsp;"}),c=t("<a/>",{class:"imagelightbox-close"}),u=t("<div/>",{class:"imagelightbox-overlay"}),s=t("<a/>",{href:"#",class:"imagelightbox-navitem"}),f=t("<div/>",{class:"imagelightbox-nav"}),g=t("<div/>",{class:"imagelightbox-wrapper"}),d=function(){var t=i.body||i.documentElement;return t=t.style,""===t.WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition&&""},p=d()!==!1,h=function(t,e,i){var n={},o=d();n[o+"transform"]="translateX("+e+")",n[o+"transition"]=o+"transform "+i+"s linear",t.css(n)},b="ontouchstart"in e,m=e.navigator.pointerEnabled||e.navigator.msPointerEnabled,v=function(t){if(b)return!0;if(!m||"undefined"==typeof t||"undefined"==typeof t.pointerType)return!1;if("undefined"!=typeof t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1};t.fn.imageLightbox=function(o){var a=t.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,lockBody:!1,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0},o),d=function(){a.arrows&&I(this),a.navigation&&C(),a.overlay&&O(),a.button&&S(),a.caption&&g.append(l)},x=function(){a.activity&&q(),a.caption&&T()},y=function(){a.activity&&E(),a.arrows&&r.css("display","block")},w=function(){var t=P.index(D)-1;if(t<0){if(a.quitOnEnd===!0)return H(),!1;t=P.length-1}D=P.eq(t),g.trigger("previous.ilb2"),K(-1)},k=function(){var t=P.index(D)+1;if(t>=P.length){if(a.quitOnEnd===!0)return H(),!1;t=0}D=P.eq(t),g.trigger("next.ilb2"),K(1)},q=function(){g.append(n)},E=function(){t(".imagelightbox-loading").remove()},O=function(){g.append(u)},S=function(){c.appendTo(g).on("click.ilb7",function(){return H(),!1})},T=function(){l.html("&nbsp;"),t(D).data("ilb2-caption")?l.html(t(D).data("ilb2-caption")):t(D).find("img").length>0&&l.html(t(D).find("img").attr("alt"))},C=function(){if(P.length){for(var e=0;e<P.length;e++)f.append(s.clone());var i=f.children("a");i.eq(P.index(D)).addClass("active"),g.on("previous.ilb2 next.ilb2",function(){i.removeClass("active").eq(P.index(D)).addClass("active")}),g.append(f),f.on("click.ilb7 touchend.ilb7",function(){return!1}).on("click.ilb7 touchend.ilb7","a",function(){var e=t(this);if(P.eq(e.index()).attr("href")!==t(".imagelightbox").attr("src")){var i=P.eq(e.index());i.length&&(N=P.index(D),D=i,K(e.index()<N?-1:1))}e.addClass("active").siblings().removeClass("active")})}},I=function(){g.append(r),r.on("click.ilb7 touchend.ilb7",function(e){return e.preventDefault(),t(this).hasClass("imagelightbox-arrow-left")?w():k(),!1})},M="",P=t([]),D=t(),R=t(),F=0,X=0,z=0,L=!1,N=0,j=function(t){function e(t){var e,n,o,a=i.createElement("a"),r={};for(a.href=t,e=a.search.replace(/^\?/,"").split("&"),o=0;o<e.length;o++)n=e[o].split("="),r[n[0]]=n[1];return{protocol:a.protocol,host:a.host,hostname:a.hostname,port:a.port,pathname:a.pathname,search:a.search,searchObject:r,hash:a.hash}}var n=a.allowedTypes,o=/^(?!\|)[\w\|]+(?!\|)$/.test(n);if(!o)return!1;var r=t.attr("href"),l=e(r).pathname,c=new RegExp(n,"i"),u=c.test(l);return u},B=function(){if(!R.length)return!0;var i=l.outerHeight(),n=.8*t(e).width(),o=(e.innerHeight?e.innerHeight:t(e).height())-i,a=.9*o,r=new Image;r.src=R.attr("src"),r.onload=function(){if(F=r.width,X=r.height,F>n||X>a){var i=F/X>n/a?F/n:X/a;F/=i,X/=i}R.css({width:F+"px",height:X+"px",top:(o-X)/2+"px",left:(t(e).width()-F)/2+"px"})}},K=function(e){if(L)return!1;if(R.length){var i={opacity:0};p?h(R,100*e-z+"px",a.animationSpeed/1e3):i.left=parseInt(R.css("left"))+100*e+"px",R.animate(i,a.animationSpeed,function(){U()}),z=0}L=!0,x(),setTimeout(function(){var i=D.attr("href");R=t('<img id="'+a.id+'" />').attr("src",i).on("load.ilb7",function(){g.trigger("loaded.ilb2");var i={opacity:1};if(R.appendTo(g),B(),R.css("opacity",0),p)h(R,-100*e+"px",0),setTimeout(function(){h(R,"0px",a.animationSpeed/1e3)},50);else{var n=parseInt(R.css("left"));i.left=n+"px",R.css("left",n-100*e+"px")}if(R.animate(i,a.animationSpeed,function(){L=!1,y()}),a.preloadNext){var o=P.eq(P.index(D)+1);o.length||(o=P.eq(0)),t("<img />").attr("src",o.attr("href"))}}).on("error.ilb7",function(){y()});var n=0,o=0,r=0;R.on(m?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",function(e){if(e.preventDefault(),a.quitOnImgClick)return H(),!1;if(v(e.originalEvent))return!0;(e.pageX||e.originalEvent.pageX)-e.target.offsetLeft;t(this).dblclick(function(e){var i=t(".imagelightbox-wrapper")[0];i.requestFullscreen?i.requestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.msRequestFullscreen&&i.msRequestFullscreen()})}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(t){return!(v(t.originalEvent)&&!a.quitOnImgClick)||(p&&(r=parseInt(R.css("left"))),void(n=t.originalEvent.pageX||t.originalEvent.touches[0].pageX))}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(t){return!((m||"pointermove"!==t.type)&&v(t.originalEvent)&&!a.quitOnImgClick)||(t.preventDefault(),o=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,z=n-o,void(p?h(R,-z+"px",0):R.css("left",r-z+"px")))}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(t){return!(v(t.originalEvent)&&!a.quitOnImgClick)||void(Math.abs(z)>50?z<0?w():k():p?h(R,"0px",a.animationSpeed/1e3):R.animate({left:r+"px"},a.animationSpeed/2))})},a.animationSpeed+100)},U=function(){return!!R.length&&(R.remove(),void(R=t()))},_=function(e){return!L&&(L=!1,D=e,d(),t("body").append(g),a.lockBody&&t("body").addClass("imagelightbox-scroll-lock"),g.trigger("start.ilb2"),void K(0))},H=function(){return g.trigger("quit.ilb2"),a.lockBody&&t("body").removeClass("imagelightbox-scroll-lock"),!!R.length&&void R.animate({opacity:0},a.animationSpeed,function(){U(),L=!1,P=t([]),g.remove().find("*").remove()})},Y=function(e){function i(){e.filter(function(){return t(this).data("imagelightbox")===M}).filter(function(){return j(t(this))}).each(function(){P=P.add(t(this))})}e.on("click.ilb7",{set:M},function(e){e.preventDefault(),M=t(e.currentTarget).data("imagelightbox"),i(),P.length<1?H():_(t(this))})};return t(e).on("resize.ilb7",B),t(i).ready(function(){a.quitOnDocClick&&t(i).on(b?"touchend.ilb7":"click.ilb7",function(e){R.length&&!t(e.target).is(R)&&(e.preventDefault(),H())}),a.lockBody&&t(i).on("keydown.ilb7",function(t){return!R.length||([9,32,38,40].indexOf(t.which)>-1?(t.preventDefault(),!1):void 0)}),a.enableKeyboard&&t(i).on("keyup.ilb7",function(t){return!R.length||(t.preventDefault(),[27].indexOf(t.which)>-1&&a.quitOnEscKey&&H(),void([37].indexOf(t.which)>-1?w():[39].indexOf(t.which)>-1&&k()))})}),t(i).off("click",a.selector),Y(t(this)),this.addToImageLightbox=function(t){Y(t)},this.loadPreviousImage=function(){w()},this.loadNextImage=function(){k()},this.quitImageLightbox=function(){return H(),this},this.startImageLightbox=function(){t(this).trigger("click.ilb7")},this}}(jQuery,window,document);