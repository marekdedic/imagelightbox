!function(t,n,i,e){"use strict";var o=function(){var t=i.body||i.documentElement;return t=t.style,""===t.WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition?"":!1},a=o()!==!1,r=function(t,n,i){var e={},a=o();e[a+"transform"]="translateX("+n+")",e[a+"transition"]=a+"transform "+i+"s linear",t.css(e)},u="ontouchstart"in n,c=n.navigator.pointerEnabled||n.navigator.msPointerEnabled,d=function(t){if(u)return!0;if(!c||"undefined"==typeof t||"undefined"==typeof t.pointerType)return!1;if("undefined"!=typeof t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1};t.fn.imageLightbox=function(e){var o=t.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg||gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0,onStart:function(){o.arrows&&E(this),o.navigation&&x(this,o.selector),o.overlay&&g(),o.button&&p()},onEnd:function(){o.activity&&l(),o.arrows&&T(),o.navigation&&y(),o.overlay&&s(),o.caption&&m(),o.button&&v()},onLoadStart:function(){o.activity&&f(),o.caption&&m()},onLoadEnd:function(){o.activity&&l(),o.arrows&&t(".imagelightbox-arrow").css("display","block"),o.navigation&&b(o.selector),o.caption&&h()},previousTarget:function(){return this.previousTargetDefault()},previousTargetDefault:function(){var t=S.index(k)-1;if(0>t){if(o.quitOnEnd===!0)return N(),!1;t=S.length-1}k=S.eq(t)},nextTarget:function(){return this.nextTargetDefault()},nextTargetDefault:function(){var t=S.index(k)+1;if(t>=S.length){if(o.quitOnEnd===!0)return N(),!1;t=0}k=S.eq(t)}},e),f=function(){t('<div id="imagelightbox-loading"><div></div></div>').appendTo("body")},l=function(){t("#imagelightbox-loading").remove()},g=function(){t('<div id="imagelightbox-overlay"></div>').appendTo("body")},s=function(){t("#imagelightbox-overlay").remove()},p=function(){t('<a href="#" id="imagelightbox-close"></a>').appendTo("body").on("click",function(){return t(this).remove(),N(),!1})},v=function(){t("#imagelightbox-close").remove()},h=function(){var n=t(k).find("img").attr("alt");n&&n.length>0&&t('<div id="imagelightbox-caption">'+n+"</div>").appendTo("body")},m=function(){t("#imagelightbox-caption").remove()},x=function(n,i){var e=t(i);if(e.length){for(var o=t('<div id="imagelightbox-nav"></div>'),a=0;a<e.length;a++)o.append('<a href="#"></a>');o.appendTo("body"),o.on("click touchend",function(){return!1});var r=o.find("a");r.on("click touchend",function(){var n=t(this);if(e.eq(n.index()).attr("href")!==t("#imagelightbox").attr("src")){var i=S.eq(n.index());if(i.length){var o=S.index(k);k=i,L(n.index()<o?"left":"right")}}return r.removeClass("active"),r.eq(n.index()).addClass("active"),!1}).on("touchend",function(){return!1})}},b=function(n){var i=t("#imagelightbox-nav").find("a");i.removeClass("active"),i.eq(t(n).filter('[href="'+t("#imagelightbox").attr("src")+'"]').index(n)).addClass("active")},y=function(){t("#imagelightbox-nav").remove()},E=function(n){var i=t('<button type="button" class="imagelightbox-arrow imagelightbox-arrow-left"></button><button type="button" class="imagelightbox-arrow imagelightbox-arrow-right"></button>');i.appendTo("body"),i.on("click touchend",function(i){return i.preventDefault(),t(this).hasClass("imagelightbox-arrow-left")?M(n):P(n),!1})},T=function(){t(".imagelightbox-arrow").remove()},S=t([]),k=t(),w=t(),q=0,O=0,C=0,I=!1,D=function(){if(!w.length)return!0;var i=.8*t(n).width(),e=n.innerHeight?n.innerHeight:t(n).height(),o=.9*e,a=new Image;a.src=w.attr("src"),a.onload=function(){if(q=a.width,O=a.height,q>i||O>o){var r=q/O>i/o?q/i:O/o;q/=r,O/=r}w.css({width:q+"px",height:O+"px",top:(e-O)/2+"px",left:(t(n).width()-q)/2+"px"})}},L=function(n){if(I)return!1;if(n="undefined"==typeof n?!1:"left"===n?1:-1,w.length){var i={opacity:0};a?r(w,100*n-C+"px",o.animationSpeed/1e3):i.left=parseInt(w.css("left"))+100*n+"px",w.animate(i,o.animationSpeed,function(){X()}),C=0}I=!0,o.onLoadStart!==!1&&o.onLoadStart(),setTimeout(function(){var i=k.attr("href");w=t('<img id="'+o.id+'" />').attr("src",i).on("load",function(){var i={opacity:1};if(w.appendTo("body"),D(),w.css("opacity",0),a)r(w,-100*n+"px",0),setTimeout(function(){r(w,"0px",o.animationSpeed/1e3)},50);else{var e=parseInt(w.css("left"));i.left=e+"px",w.css("left",e-100*n+"px")}if(w.animate(i,o.animationSpeed,function(){I=!1,o.onLoadEnd!==!1&&o.onLoadEnd()}),o.preloadNext){var u=S.eq(S.index(k)+1);u.length||(u=S.eq(0)),t("<img />").attr("src",u.attr("href"))}}).on("error",function(){o.onLoadEnd!==!1&&o.onLoadEnd()});var e=0,u=0,f=0;w.on(c?"pointerup MSPointerUp":"click",function(t){if(t.preventDefault(),o.quitOnImgClick)return N(),!1;if(d(t.originalEvent))return!0;var n=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;q/2>n?M():P()}).on("touchstart pointerdown MSPointerDown",function(t){return!d(t.originalEvent)||o.quitOnImgClick?!0:(a&&(f=parseInt(w.css("left"))),void(e=t.originalEvent.pageX||t.originalEvent.touches[0].pageX))}).on("touchmove pointermove MSPointerMove",function(t){return!d(t.originalEvent)||o.quitOnImgClick?!0:(t.preventDefault(),u=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,C=e-u,void(a?r(w,-C+"px",0):w.css("left",f-C+"px")))}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(t){return!d(t.originalEvent)||o.quitOnImgClick?!0:void(Math.abs(C)>50?0>C?M():P():a?r(w,"0px",o.animationSpeed/1e3):w.animate({left:f+"px"},o.animationSpeed/2))})},o.animationSpeed+100)},M=function(){o.previousTarget()!==!1&&L("left")},P=function(){o.nextTarget()!==!1&&L("right")},X=function(){return w.length?(w.remove(),void(w=t())):!1},N=function(){return w.length?void w.animate({opacity:0},o.animationSpeed,function(){X(),I=!1,o.onEnd!==!1&&o.onEnd()}):!1},K=function(n){n.each(function(){S=S.add(t(this))}),n.on("click",function(n){return n.preventDefault(),I?!1:(I=!1,o.onStart!==!1&&o.onStart(),k=t(this),void L())})};return t(n).on("resize",D),t(i).ready(function(){o.quitOnDocClick&&t(i).on(u?"touchend":"click",function(n){w.length&&!t(n.target).is(w)&&(n.preventDefault(),N())}),o.enableKeyboard&&t(i).on("keyup",function(t){return w.length?(t.preventDefault(),27===t.keyCode&&o.quitOnEscKey===!0&&N(),void(37===t.keyCode?M():39===t.keyCode&&P())):!0})}),t(i).off("click",this.selector),K(t(this)),this.loadPreviousImage=function(){M()},this.loadNextImage=function(){P()},this.quitImageLightbox=function(){return N(),this},this.addToImageLightbox=function(t){K(t)},this}}(jQuery,window,document);