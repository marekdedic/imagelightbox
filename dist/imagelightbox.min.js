"use strict";!function(N,V,U){"use strict";var K=N("<div/>").attr("class","imagelightbox-loading").append(N("<div/>")),e=N("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),t=N("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),Y=e.add(t),_=N("<div/>",{class:"imagelightbox-caption",html:"&nbsp;"}),H=N("<button/>",{type:"button",class:"imagelightbox-close"}),$=N("<div/>",{class:"imagelightbox-overlay"}),W=N("<a/>",{href:"#",class:"imagelightbox-navitem"}),B=N("<div/>",{class:"imagelightbox-nav"}),Q=N("<div/>",{class:"imagelightbox-wrapper"}),A=N("body"),r=function(){var e=(U.body||U.documentElement).style;if(e.transition==="")return"";if(e.webkitTransition==="")return"-webkit-";if(e.MozTransition==="")return"-moz-";if(e.OTransition==="")return"-o-";return false},G=r()!==false,J=function(e,t,i){var n={},a=r()||"";n[a+"transform"]="translateX("+t+") translateY(-50%)";n[a+"transition"]=a+"transform "+i.toString()+"s ease-in";e.css(n)},Z="ontouchstart"in V,i=V.navigator,ee=i.pointerEnabled||i.msPointerEnabled,te=function(e){if(Z)return true;if(!ee||typeof e==="undefined"||typeof e.pointerType==="undefined")return false;if(typeof e.MSPOINTER_TYPE_MOUSE!=="undefined"){if(e.MSPOINTER_TYPE_MOUSE!==e.pointerType)return true}else if(e.pointerType!=="mouse")return true;return false},ie=!!(U.fullscreenEnabled||U.webkitFullscreenEnabled||U.mozFullScreenEnabled||U.msFullscreenEnabled),ne=!!(V.history&&history.pushState);N.fn.imageLightbox=function(e){var i=0;var s=N();var c=false;var d=0;var g=N();var o=-1;var h=N([]);var n="";var p=[],b=N.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:false,arrows:false,button:false,caption:false,enableKeyboard:true,history:false,fullscreen:false,gutter:10,offsetY:0,navigation:false,overlay:false,preloadNext:true,quitOnEnd:false,quitOnImgClick:false,quitOnDocClick:true,quitOnEscKey:true},e),a=function(){if(b.arrows)z();if(b.navigation)L();if(b.overlay)k();if(b.button)q();if(b.caption)Q.append(_)},t=function(){if(b.activity)E();if(b.caption)C()},v=function(){if(b.activity)I();if(b.arrows)Y.css("display","block")},r=function(e,t,i){var n=t+"="+i;var a="?"+n;if(e){var r=new RegExp("([?&])"+t+"=[^&]*");if(r.exec(e)!==null)a=e.replace(r,"$1"+n);else a=e+"&"+n}return a},l=function(){if(!ne||!b.history)return;var e=h[o].dataset.ilb2Id;if(!e)e=o.toString();var t={imageLightboxIndex:e,imageLightboxSet:""};var i=h[o].dataset.imagelightbox;if(i)t.imageLightboxSet=i;var n=r(U.location.search,"imageLightboxIndex",e);if(i)n=r(n,"imageLightboxSet",i);V.history.pushState(t,"",U.location.pathname+n)},f=function(e,t){var i=e;if(i){var n=new RegExp("\\?"+t+"=[^&]*");var a=new RegExp("&"+t+"=[^&]*");i=i.replace(n,"?");i=i.replace(a,"")}return i},u=function(){if(!ne||!b.history)return;var e=f(U.location.search,"imageLightboxIndex");e=f(e,"imageLightboxSet");V.history.pushState({},"",U.location.pathname+e)},m=function(e){var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(U.location.search);if(!t||!t[2])return undefined;return decodeURIComponent(t[2].replace(/\+/g," "))},x=function(){if(!ne||!b.history)return;var e=m("imageLightboxIndex");if(!e)return;var t=h.filter('[data-ilb2-id="'+e+'"]');if(t.length>0)o=h.index(t);else{o=parseInt(e);t=N(h[o])}var i=m("imageLightboxSet");if(!t[0]||!!i&&i!==t[0].dataset.imagelightbox)return;F(t,true)},y=function(e){var t=e.originalEvent.state;if(!t){M(true);return}var i=t.imageLightboxIndex;if(i===undefined){M(true);return}var n=h.filter('[data-ilb2-id="'+i+'"]');if(n.length===0)return;var a=h.index(n);if(!n[0]||t.imageLightboxSet&&t.imageLightboxSet!==n[0].dataset.imagelightbox)return;if(o<0){F(n,true);return}var r=+1;if(a>o)r=-1;g=n;o=a;O(r)},S=function(){if(c)return;o--;if(o<0)if(b.quitOnEnd===true){M();return}else o=h.length-1;g=h.eq(o);l();Q.trigger("previous.ilb2",g);O(+1)},w=function(){if(c)return;o++;if(o>=h.length)if(b.quitOnEnd===true){M();return}else o=0;l();g=h.eq(o);Q.trigger("next.ilb2",g);O(-1)},E=function(){Q.append(K)},I=function(){N(".imagelightbox-loading").remove()},k=function(){Q.append($)},q=function(){H.appendTo(Q).on("click.ilb7",function(){M();return false})},C=function(){_.css("opacity","0");_.html("&nbsp;");if(N(g).data("ilb2-caption")){_.css("opacity","1");_.html(N(g).data("ilb2-caption"))}else if(N(g).find("img").attr("alt")){_.css("opacity","1");_.html(N(g).find("img").attr("alt"))}},L=function(){if(!h.length)return;for(var e=0;e<h.length;e++)B.append(W.clone());var t=B.children("a");t.eq(h.index(g)).addClass("active");Q.on("previous.ilb2 next.ilb2",function(){t.removeClass("active").eq(h.index(g)).addClass("active")});Q.append(B);B.on("click.ilb7 touchend.ilb7",function(){return false}).on("click.ilb7 touchend.ilb7","a",function(){var e=N(this);if(h.eq(e.index()).attr("href")!==N(".imagelightbox").attr("src")){var t=h.eq(e.index());if(t.length){i=h.index(g);g=t;O(e.index()<i?-1:1)}}e.addClass("active").siblings().removeClass("active")})},z=function(){Q.append(Y);Y.on("click.ilb7 touchend.ilb7",function(e){e.stopImmediatePropagation();e.preventDefault();if(N(this).hasClass("imagelightbox-arrow-left"))S();else w()})},X=function(e){return N(e).prop("tagName").toLowerCase()==="a"&&(new RegExp(".("+b.allowedTypes+")$","i").test(N(e).attr("href"))||N(e).data("ilb2Video"))},T=function(){if(!s.length)return;var e=b.caption?_.outerHeight():0,o=N(V).width(),l=N(V).height()-e,f=Math.abs(1-b.gutter/100);function i(e,t){if(e>o||t>l){var i=e/t>o/l?e/o:t/l;e/=i;t/=i}var n=t*f,a=e*f,r=(N(V).width()-a)/2;s.css({width:a.toString()+"px",height:n.toString()+"px",left:r.toString()+"px"})}var n=s.data("ilb2VideoId");var a=false;N.each(p,function(e,t){if(n===this.i){i(t.w,t.h);a=true}});if(a)return;var t=s.get(0);if(t.videoWidth!==undefined){i(t.videoWidth,t.videoHeight);return}var r=new Image;r.src=s.attr("src");r.onload=function(){i(r.width,r.height)}},O=function(u){if(c)return;if(s.length){var e={opacity:0};if(G)J(s,(100*u-d).toString()+"px",b.animationSpeed/1e3);else e.left=(parseInt(s.css("left"))+100*u).toString()+"px";s.animate(e,b.animationSpeed,function(){P()});d=0}c=true;t();setTimeout(function(){var t=0;var i=0;var n=0;var e=g.attr("href");var a=g.data("ilb2Video");var r=N();var o;if(a)N.each(p,function(e,t){if(t.i===g.data("ilb2VideoId")){o=t.l;r=t.e;if(t.a){if(o===false)r.attr("autoplay",t.a);if(o===true)void r.get(0).play()}}});else r=N("<img id='"+b.id+"' />").attr("src",e);function l(){var e={opacity:1};s.appendTo(Q);T();s.css("opacity",0);if(G){J(s,(-100*u).toString()+"px",0);setTimeout(function(){J(s,"0px",b.animationSpeed/1e3)},50)}else{n=parseInt(s.css("left"));e.left=n.toString()+"px";s.css("left",(n-100*u).toString()+"px")}s.animate(e,b.animationSpeed,function(){c=false;v()});if(b.preloadNext){var t=h.eq(h.index(g)+1);if(!t.length)t=h.eq(0);N("<img />").attr("src",t.attr("href"))}Q.trigger("loaded.ilb2")}function f(e){e.preventDefault();if(b.quitOnImgClick){M();return}if(te(e.originalEvent))return;var t=(e.pageX||e.originalEvent.pageX)-e.target.offsetLeft;if(e.target.width/3>t)S();else w()}s=r.on("load.ilb7",l).on("error.ilb7",function(){v()}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(e){if(!te(e.originalEvent)||b.quitOnImgClick)return;if(G)n=parseInt(s.css("left"));t=e.originalEvent.pageX||e.originalEvent.touches[0].pageX}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(e){if(!ee&&e.type==="pointermove"||!te(e.originalEvent)||b.quitOnImgClick)return;e.preventDefault();i=e.originalEvent.pageX||e.originalEvent.touches[0].pageX;d=t-i;if(G)J(s,(-d).toString()+"px",0);else s.css("left",(n-d).toString()+"px")}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(e){if(!te(e.originalEvent)||b.quitOnImgClick)return;if(Math.abs(d)>50)if(d<0)S();else w();else if(G)J(s,"0px",b.animationSpeed/1e3);else s.animate({left:n.toString()+"px"},b.animationSpeed/2)});if(o===true)l();if(o===false)s=s.on("loadedmetadata.ilb7",l);if(!a)s=s.on(ee?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",f)},b.animationSpeed+100)},P=function(){if(!s.length)return;s.remove();s=N()},F=function(e,t){if(c)return;c=false;g=e;o=h.index(g);if(!t)l();a();A.append(Q).addClass("imagelightbox-open");Q.trigger("start.ilb2",e);O(0)},M=function(e){if(e===void 0)e=false;o=-1;if(!e)u();Q.trigger("quit.ilb2");A.removeClass("imagelightbox-open");if(!s.length)return;s.animate({opacity:0},b.animationSpeed,function(){P();c=false;Q.remove().find("*").remove()})},D=function(e){e.each(function(){h=e.add(N(this))});e.on("click.ilb7",{set:n},function(e){e.preventDefault();n=N(e.currentTarget).data("imagelightbox");t();if(h.length<1)M();else F(N(this),false)});function t(){e.filter(function(){return N(this).data("imagelightbox")===n}).filter(function(){return X(N(this))}).each(function(){h=h.add(N(this))})}},R=function(e){e.each(function(){var e=N(this).data("ilb2Video");if(e){var t=N(this).data("ilb2Id");if(!t)t="a"+((1+Math.random())*65536|0).toString(16);N(this).data("ilb2VideoId",t);var n={e:N("<video id='"+b.id+"' preload='metadata' data-ilb2-video-id='"+t+"'>"),i:t,l:false,a:undefined,h:undefined,w:undefined};N.each(e,function(e,t){switch(e){case"autoplay":n.a=t;break;case"height":n.h=t;break;case"sources":break;case"width":n.w=t;break;default:n.e=n.e.attr(e,t)}});if(e.sources)N.each(e.sources,function(e,t){var i=N("<source>");N.each(t,function(e,t){i=i.attr(e,t)});n.e.append(i)});n.e.on("loadedmetadata.ilb7",function(){n.l=true});p.push(n)}})};N(V).on("resize.ilb7",T);if(ne&&b.history)N(V).on("popstate",y);N(U).ready(function(){if(b.quitOnDocClick)N(U).on(Z?"touchend.ilb7":"click.ilb7",function(e){if(s.length&&!N(e.target).is(s)){e.preventDefault();M()}});if(b.fullscreen&&ie)N(U).on("keydown.ilb7",function(e){if(!s.length)return;if([9,32,38,40].includes(e.which)){e.stopPropagation();e.preventDefault()}if([13].includes(e.which)){e.stopPropagation();e.preventDefault();j()}});if(b.enableKeyboard)N(U).on("keydown.ilb7",function(e){if(!s.length)return;if([27].includes(e.which)&&b.quitOnEscKey){e.stopPropagation();e.preventDefault();M()}if([37].includes(e.which)){e.stopPropagation();e.preventDefault();S()}if([39].includes(e.which)){e.stopPropagation();e.preventDefault();w()}})});function j(){var e=V.document;var t=U.getElementById(b.id).parentElement;var i=t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen||t.msRequestFullscreen;var n=e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen;if(!e.fullscreenElement&&!e.mozFullScreenElement&&!e.webkitFullscreenElement&&!e.msFullscreenElement)void i.call(t);else void n.call(e)}N(U).off(".ilb7 .ilb2",b.selector);D(N(this));x();R(h);this.addToImageLightbox=function(e){D(e);R(e)};this.openHistory=function(){x()};this.loadPreviousImage=function(){S()};this.loadNextImage=function(){w()};this.quitImageLightbox=function(){M();return this};this.startImageLightbox=function(e){if(e)e.trigger("click.ilb7");else N(this).trigger("click.ilb7")};return this}}("object"==typeof module&&"object"==typeof module.exports?require("jquery"):jQuery,window,document);