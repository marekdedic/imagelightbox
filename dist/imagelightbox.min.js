!function(t,n,e,i){"use strict";var o=function(){var t=e.body||e.documentElement;return t=t.style,""===t.WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition?"":!1},a=o()!==!1,r=function(t,n,e){var i={},a=o();i[a+"transform"]="translateX("+n+")",i[a+"transition"]=a+"transform "+e+"s linear",t.css(i)},u="ontouchstart"in n,c=n.navigator.pointerEnabled||n.navigator.msPointerEnabled,d=function(t){if(u)return!0;if(!c||"undefined"==typeof t||"undefined"==typeof t.pointerType)return!1;if("undefined"!=typeof t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1};t.fn.imageLightbox=function(o){var l=t.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg||gif",animationSpeed:250,preloadNext:!0,enableKeyboard:!0,activity:!1,arrows:!1,button:!1,navigation:!1,overlay:!1,caption:!1,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0,onStart:function(){l.arrows&&T(this),l.navigation&&b(this,l.selector),l.overlay&&s(),l.button&&p()},onEnd:function(){l.activity&&g(),l.arrows&&w(),l.navigation&&E(),l.overlay&&h(),l.caption&&x(),l.button&&v()},onLoadStart:function(){l.activity&&f(),l.caption&&x()},onLoadEnd:function(){l.activity&&g(),l.arrows&&t(".imagelightbox-arrow").css("display","block"),l.navigation&&y(l.selector),l.caption&&m()},previousTarget:function(){return this.previousTargetDefault()},previousTargetDefault:function(){var t=S.index(k)-1;if(0>t){if(l.quitOnEnd===!0)return U(),!1;t=S.length-1}k=S.eq(t)},nextTarget:function(){return this.nextTargetDefault()},nextTargetDefault:function(){var t=S.index(k)+1;if(t>=S.length){if(l.quitOnEnd===!0)return U(),!1;t=0}k=S.eq(t)}},o),f=function(){t('<div id="imagelightbox-loading"><div></div></div>').appendTo("body")},g=function(){t("#imagelightbox-loading").remove()},s=function(){t('<div id="imagelightbox-overlay"></div>').appendTo("body")},h=function(){t("#imagelightbox-overlay").remove()},p=function(){t('<a href="#" id="imagelightbox-close"></a>').appendTo("body").on("click",function(){return t(this).remove(),U(),!1})},v=function(){t("#imagelightbox-close").remove()},m=function(){var n=t(k).find("img").attr("alt");n&&n.length>0&&t('<div id="imagelightbox-caption">'+n+"</div>").appendTo("body")},x=function(){t("#imagelightbox-caption").remove()},b=function(n,e){var i=t(e);if(i.length){for(var o=t('<div id="imagelightbox-nav"></div>'),a=0;a<i.length;a++)o.append('<a href="#"></a>');o.appendTo("body"),o.on("click touchend",function(){return!1});var r=o.find("a");r.on("click touchend",function(){var n=t(this);if(i.eq(n.index()).attr("href")!==t("#imagelightbox").attr("src")){var e=S.eq(n.index());if(e.length){var o=S.index(k);k=e,P(n.index()<o?"left":"right")}}return r.removeClass("active"),r.eq(n.index()).addClass("active"),!1}).on("touchend",function(){return!1})}},y=function(n){var e=t("#imagelightbox-nav").find("a");e.removeClass("active"),e.eq(t(n).filter('[href="'+t("#imagelightbox").attr("src")+'"]').index(n)).addClass("active")},E=function(){t("#imagelightbox-nav").remove()},T=function(n){var e=t('<button type="button" class="imagelightbox-arrow imagelightbox-arrow-left"></button><button type="button" class="imagelightbox-arrow imagelightbox-arrow-right"></button>');e.appendTo("body"),e.on("click touchend",function(e){return e.preventDefault(),t(this).hasClass("imagelightbox-arrow-left")?X(n):N(n),!1})},w=function(){t(".imagelightbox-arrow").remove()},S=t([]),k=t(),q=t(),I=0,C=0,O=0,L=!1,D=function(n){var e="a"===t(n).prop("tagName").toLowerCase()&&new RegExp(".("+l.allowedTypes+")$","i").test(t(n).attr("href")),o=t(n).attr("data-lightbox")!==i;return e||o},M=function(){if(!q.length)return!0;var e=.8*t(n).width(),i=.9*t(n).height(),o=new Image;o.src=q.attr("src"),o.onload=function(){if(I=o.width,C=o.height,I>e||C>i){var a=I/C>e/i?I/e:C/i;I/=a,C/=a}q.css({width:I+"px",height:C+"px",top:(t(n).height()-C)/2+"px",left:(t(n).width()-I)/2+"px"})}},P=function(n){if(L)return!1;if(n="undefined"==typeof n?!1:"left"===n?1:-1,q.length){var e={opacity:0};a?r(q,100*n-O+"px",l.animationSpeed/1e3):e.left=parseInt(q.css("left"))+100*n+"px",q.animate(e,l.animationSpeed,function(){K()}),O=0}L=!0,l.onLoadStart!==!1&&l.onLoadStart(),setTimeout(function(){var e=k.attr("href");q=t('<img id="'+l.id+'" />').attr("src",e).load(function(){var e={opacity:1};if(q.appendTo("body"),M(),q.css("opacity",0),a)r(q,-100*n+"px",0),setTimeout(function(){r(q,"0px",l.animationSpeed/1e3)},50);else{var i=parseInt(q.css("left"));e.left=i+"px",q.css("left",i-100*n+"px")}if(q.animate(e,l.animationSpeed,function(){L=!1,l.onLoadEnd!==!1&&l.onLoadEnd()}),l.preloadNext){var o=S.eq(S.index(k)+1);o.length||(o=S.eq(0)),t("<img />").attr("src",o.attr("href")).load()}}).error(function(){l.onLoadEnd!==!1&&l.onLoadEnd()});var i=0,o=0,u=0;q.on(c?"pointerup MSPointerUp":"click",function(t){if(t.preventDefault(),l.quitOnImgClick)return U(),!1;if(d(t.originalEvent))return!0;var n=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;I/2>n?X():N()}).on("touchstart pointerdown MSPointerDown",function(t){return!d(t.originalEvent)||l.quitOnImgClick?!0:(a&&(u=parseInt(q.css("left"))),void(i=t.originalEvent.pageX||t.originalEvent.touches[0].pageX))}).on("touchmove pointermove MSPointerMove",function(t){return!d(t.originalEvent)||l.quitOnImgClick?!0:(t.preventDefault(),o=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,O=i-o,void(a?r(q,-O+"px",0):q.css("left",u-O+"px")))}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(t){return!d(t.originalEvent)||l.quitOnImgClick?!0:void(Math.abs(O)>50?0>O?X():N():a?r(q,"0px",l.animationSpeed/1e3):q.animate({left:u+"px"},l.animationSpeed/2))})},l.animationSpeed+100)},X=function(){l.previousTarget()!==!1&&P("left")},N=function(){l.nextTarget()!==!1&&P("right")},K=function(){return q.length?(q.remove(),void(q=t())):!1},U=function(){return q.length?void q.animate({opacity:0},l.animationSpeed,function(){K(),L=!1,l.onEnd!==!1&&l.onEnd()}):!1};return t(n).on("resize",M),l.quitOnDocClick&&t(e).on(u?"touchend":"click",function(n){q.length&&!t(n.target).is(q)&&(n.preventDefault(),U())}),l.enableKeyboard&&t(e).on("keyup",function(t){return q.length?(t.preventDefault(),27===t.keyCode&&l.quitOnEscKey===!0&&U(),void(37===t.keyCode?X():39===t.keyCode&&N())):!0}),this.startImageLightbox=function(n){return D(this)?(n!==i&&n.preventDefault(),L?!1:(L=!1,l.onStart!==!1&&l.onStart(),k=t(this),void P())):!0},t(e).off("click",this.selector),t(e).on("click",this.selector,this.startImageLightbox),this.each(function(){return D(this)?void(S=S.add(t(this))):!0}),this.loadPreviousImage=function(){X()},this.loadNextImage=function(){N()},this.quitImageLightbox=function(){return U(),this},this.addImageLightbox=function(n){return n.each(function(){return D(this)?void(S=S.add(t(this))):!0}),n.click(this.startImageLightbox),this},this}}(jQuery,window,document);